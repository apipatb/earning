# Environment Variables Quick Reference

Quick lookup guide for all environment variables in EarnTrack.

## Legend
- **REQUIRED** - Must be set for app to work
- **OPTIONAL** - Feature disabled without it
- **RECOMMENDED** - Should set for production

---

## Required Variables

| Variable | Purpose | Example | How to Generate |
|----------|---------|---------|-----------------|
| `DATABASE_URL` | PostgreSQL connection | `postgresql://user:pass@localhost:5432/db` | Use Docker values or local PostgreSQL |
| `JWT_SECRET` | Authentication tokens | `abc123...` | `openssl rand -base64 32` |
| `POSTGRES_PASSWORD` | Database password | `secure_password_123` | Password manager |
| `ALLOWED_ORIGINS` | CORS allowed domains | `http://localhost:3000,https://app.com` | Your frontend URLs |

---

## Optional Services

### Error Tracking & Monitoring

| Variable | Service | Required | Get It From | Cost |
|----------|---------|----------|-------------|------|
| `SENTRY_DSN` | Sentry | NO | https://sentry.io | Free tier available |
| `SENTRY_ENVIRONMENT` | Sentry | NO | Set to `development` or `production` | - |
| `SENTRY_TRACE_SAMPLE_RATE` | Sentry | NO | `0.1` = 10% of transactions | - |

**Use case:** Production error tracking, crash reports, performance monitoring

---

### AI Chatbot

| Variable | Service | Required | Get It From | Cost |
|----------|---------|----------|-------------|------|
| `OPENAI_API_KEY` | OpenAI | NO | https://platform.openai.com/api-keys | ~$0.15 per 1M tokens |
| `OPENAI_MODEL_NAME` | OpenAI | NO | `gpt-4o-mini` (recommended) | - |
| `OPENAI_MAX_TOKENS` | OpenAI | NO | `1000` | - |

**Use case:** AI-powered assistant for earning insights and recommendations

**Cost estimate:** 10k conversations/month ≈ $1.50/month (with gpt-4o-mini)

---

### SMS & WhatsApp

| Variable | Service | Required | Get It From | Cost |
|----------|---------|----------|-------------|------|
| `TWILIO_ACCOUNT_SID` | Twilio | NO | https://console.twilio.com | $8.65/1k SMS |
| `TWILIO_AUTH_TOKEN` | Twilio | NO | https://console.twilio.com | - |
| `TWILIO_PHONE_NUMBER` | Twilio | NO | Buy from Twilio ($1.15/month) | - |

**Use case:** SMS campaigns, WhatsApp messaging

**Cost estimate:** 1,000 SMS/month ≈ $8.65/month + $1.15/month (phone)

---

### File Storage

| Variable | Service | Required | Get It From | Cost |
|----------|---------|----------|-------------|------|
| `AWS_ACCESS_KEY_ID` | AWS S3 | NO | AWS IAM Console | First 5GB free |
| `AWS_SECRET_ACCESS_KEY` | AWS S3 | NO | AWS IAM Console | Then $0.023/GB/month |
| `AWS_S3_BUCKET` | AWS S3 | NO | AWS S3 Console | - |
| `AWS_REGION` | AWS S3 | NO | `us-east-1` | - |

**Use case:** User file uploads, attachments, backups

**Cost estimate:** 10GB storage ≈ $0.23/month

---

### Advanced Search

| Variable | Service | Required | Get It From | Cost |
|----------|---------|----------|-------------|------|
| `ELASTICSEARCH_NODE` | Elasticsearch | NO | http://localhost:9200 or Elastic Cloud | Free (self-hosted) |
| `ELASTICSEARCH_API_KEY` | Elasticsearch | NO | Elastic Cloud Console | $95+/month (cloud) |
| `ELASTICSEARCH_USERNAME` | Elasticsearch | NO | Local setup | - |
| `ELASTICSEARCH_PASSWORD` | Elasticsearch | NO | Local setup | - |

**Use case:** Full-text search across tickets, messages, customers, documents

**When needed:** >10k records or complex search requirements

---

### Email

| Variable | Service | Required | Get It From | Cost |
|----------|---------|----------|-------------|------|
| `SMTP_HOST` | Any SMTP | NO | Provider-specific | Varies |
| `SMTP_PORT` | Any SMTP | NO | Usually `587` | - |
| `SMTP_USER` | Any SMTP | NO | Provider-specific | - |
| `SMTP_PASSWORD` | Any SMTP | NO | Provider-specific | - |
| `EMAIL_FROM` | Any SMTP | NO | `noreply@yourdomain.com` | - |

**Recommended providers:**
- **SendGrid** - 100 emails/day free
- **AWS SES** - $0.10 per 1,000 emails
- **Mailgun** - 5,000 emails/month free

---

### Passwordless Authentication

| Variable | Service | Required | Get It From | Cost |
|----------|---------|----------|-------------|------|
| `WEBAUTHN_RP_NAME` | WebAuthn | NO | `"EarnTrack"` | Free |
| `WEBAUTHN_RP_ID` | WebAuthn | NO | `localhost` or `yourdomain.com` | - |
| `WEBAUTHN_ORIGIN` | WebAuthn | NO | `http://localhost:3000` or full URL | - |

**Use case:** Biometric login (Face ID, Touch ID, Windows Hello, YubiKey)

---

## Configuration Templates

### Minimal Development Setup

```bash
# .env
DATABASE_URL="postgresql://earntrack:dev@localhost:5432/earntrack?schema=public"
JWT_SECRET="dev-secret-change-in-production"
POSTGRES_PASSWORD="dev"
ALLOWED_ORIGINS="http://localhost:5173,http://localhost:3000"
```

### Production Ready Setup

```bash
# .env
DATABASE_URL="postgresql://earntrack:STRONG_PASSWORD@postgres:5432/earntrack?schema=public"
JWT_SECRET="<generated-with-openssl-rand-base64-32>"
POSTGRES_PASSWORD="<strong-password-from-password-manager>"
ALLOWED_ORIGINS="https://yourdomain.com"

# Error Tracking
SENTRY_DSN="https://key@org.ingest.sentry.io/project"
SENTRY_ENVIRONMENT="production"
ENABLE_ERROR_TRACKING=true

# Email
SMTP_HOST="smtp.sendgrid.net"
SMTP_PORT=587
SMTP_USER="apikey"
SMTP_PASSWORD="SG.your_api_key"
EMAIL_FROM="noreply@yourdomain.com"

# File Storage
AWS_ACCESS_KEY_ID="AKIA..."
AWS_SECRET_ACCESS_KEY="..."
AWS_S3_BUCKET="yourbucket"
AWS_REGION="us-east-1"
```

### Full Feature Setup

All production variables PLUS:

```bash
# AI Chatbot
OPENAI_API_KEY="sk-..."
OPENAI_MODEL_NAME="gpt-4o-mini"

# SMS/WhatsApp
TWILIO_ACCOUNT_SID="AC..."
TWILIO_AUTH_TOKEN="..."
TWILIO_PHONE_NUMBER="+14155552671"

# Advanced Search
ELASTICSEARCH_NODE="https://your-deployment.es.cloud.elastic.co"
ELASTICSEARCH_API_KEY="your_api_key"

# WebAuthn
WEBAUTHN_RP_NAME="EarnTrack Production"
WEBAUTHN_RP_ID="yourdomain.com"
WEBAUTHN_ORIGIN="https://yourdomain.com"
```

---

## Cost Estimates

### Free Tier (Development)
- **Database:** PostgreSQL (self-hosted) - $0
- **Storage:** First 5GB S3 - $0
- **Email:** SendGrid 100/day - $0
- **Monitoring:** Sentry 5k events/month - $0
- **Total:** $0/month

### Small Production (~1k users)
- **Database:** AWS RDS t3.micro - $15/month
- **Storage:** 10GB S3 - $0.23/month
- **Email:** SendGrid 40k/month - $19.95/month
- **Monitoring:** Sentry Team - $26/month
- **AI:** OpenAI (10k convos) - $1.50/month
- **Total:** ~$63/month

### Medium Production (~10k users)
- **Database:** AWS RDS t3.medium - $70/month
- **Storage:** 100GB S3 - $2.30/month
- **Email:** AWS SES 100k/month - $10/month
- **Monitoring:** Sentry Business - $80/month
- **AI:** OpenAI (100k convos) - $15/month
- **SMS:** Twilio 10k SMS - $86.50/month
- **Search:** Elastic Cloud - $95/month
- **Total:** ~$359/month

---

## Security Checklist

- [ ] Change all default passwords
- [ ] Generate strong JWT secret (32+ chars)
- [ ] Never commit .env to version control
- [ ] Use different secrets for dev/staging/prod
- [ ] Enable HTTPS in production
- [ ] Set up CORS properly
- [ ] Use environment-specific .env files
- [ ] Rotate API keys annually
- [ ] Use secret management tools (AWS Secrets Manager, Vault)
- [ ] Enable MFA on all service accounts
- [ ] Monitor for leaked credentials
- [ ] Set up usage alerts on paid services

---

## Next Steps

1. **Copy and configure:**
   ```bash
   cp .env.example .env
   nano .env  # Edit with your values
   ```

2. **Start with minimal setup**
3. **Add services as needed**
4. **Read full docs:** See `.env.SETUP.md` for detailed setup instructions

---

## Support Resources

- **Full Setup Guide:** `.env.SETUP.md`
- **Example Files:** `.env.example`, `app/backend/.env.example`
- **Git Status:** Run `git status` to see what's changed
- **Verify Setup:** Run `docker-compose config` to validate

---

**Last Updated:** 2025-11-16
