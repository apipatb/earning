# =============================================================================
# EarnTrack Docker Environment Configuration
# =============================================================================
# Copy this file to .env and update with your values
# WARNING: Never commit .env to version control!
#
# For detailed setup instructions, see .env.SETUP.md
# =============================================================================

# =============================================================================
# DATABASE CONFIGURATION (REQUIRED)
# =============================================================================
# PostgreSQL database credentials for Docker container
# SECURITY: Change these values in production!
POSTGRES_USER=earntrack
POSTGRES_PASSWORD=change_this_secure_password_in_production
POSTGRES_DB=earntrack
POSTGRES_PORT=5432

# =============================================================================
# BACKEND CONFIGURATION (REQUIRED)
# =============================================================================
NODE_ENV=development
BACKEND_PORT=3001

# -----------------------------------------------------------------------------
# JWT Authentication (REQUIRED)
# -----------------------------------------------------------------------------
# Generate a secure random string (minimum 32 characters)
# Example command: openssl rand -base64 32
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production-use-long-random-string
JWT_EXPIRES_IN=7d

# -----------------------------------------------------------------------------
# CORS Configuration (REQUIRED)
# -----------------------------------------------------------------------------
# Comma-separated list of allowed origins
# Update with your production frontend URL
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000,http://localhost:80

# -----------------------------------------------------------------------------
# Logging & Performance (REQUIRED)
# -----------------------------------------------------------------------------
LOG_LEVEL=debug

# -----------------------------------------------------------------------------
# Rate Limiting (REQUIRED)
# -----------------------------------------------------------------------------
# Window in milliseconds (default: 15 minutes)
RATE_LIMIT_WINDOW_MS=900000
# Max requests per window per IP
RATE_LIMIT_MAX_REQUESTS=100

# -----------------------------------------------------------------------------
# Security (REQUIRED)
# -----------------------------------------------------------------------------
HELMET_ENABLED=true
COMPRESSION_ENABLED=true
CORS_CREDENTIALS=true

# =============================================================================
# FRONTEND CONFIGURATION (REQUIRED)
# =============================================================================
FRONTEND_PORT=80
VITE_API_URL=http://localhost:3001/api/v1

# =============================================================================
# MONITORING & ERROR TRACKING (OPTIONAL)
# =============================================================================
ENABLE_REQUEST_LOGGING=true
ENABLE_ERROR_TRACKING=false

# -----------------------------------------------------------------------------
# Sentry Error Tracking (OPTIONAL)
# -----------------------------------------------------------------------------
# Used for: Production error tracking and performance monitoring
# Required: No - App works without it
# Get your DSN from: https://sentry.io
# 1. Create a Sentry account at https://sentry.io
# 2. Create a new project (select Node.js/Express)
# 3. Copy the DSN from Settings > Projects > [Your Project] > Client Keys (DSN)
# Example: https://abc123@o123456.ingest.sentry.io/123456
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACE_SAMPLE_RATE=0.1
APP_VERSION=1.0.0

# =============================================================================
# EMAIL CONFIGURATION (OPTIONAL)
# =============================================================================
# Used for: User notifications, password resets, alerts
# Required: No - App works without email
# Common providers:
# - Gmail: smtp.gmail.com (requires App Password)
# - SendGrid: smtp.sendgrid.net
# - AWS SES: email-smtp.[region].amazonaws.com
# - Mailgun: smtp.mailgun.org
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
EMAIL_FROM=noreply@earntrack.app

# =============================================================================
# AI CHATBOT (OPTIONAL)
# =============================================================================
# Used for: AI-powered chat assistant for earning insights
# Required: No - Chatbot feature disabled without API key
# Get your API key from: https://platform.openai.com/api-keys
# 1. Create an OpenAI account
# 2. Go to https://platform.openai.com/api-keys
# 3. Click "Create new secret key"
# 4. Copy the key (starts with sk-...)
# Note: This is a paid service. Check pricing at https://openai.com/pricing
OPENAI_API_KEY=
OPENAI_MODEL_NAME=gpt-4o-mini
OPENAI_MAX_TOKENS=1000

# =============================================================================
# SMS & WHATSAPP (OPTIONAL)
# =============================================================================
# Used for: SMS campaigns and WhatsApp messaging
# Required: No - SMS/WhatsApp features disabled without credentials
# Get credentials from: https://www.twilio.com
# 1. Create a Twilio account at https://www.twilio.com/try-twilio
# 2. Get Account SID and Auth Token from Console Dashboard
# 3. Get a phone number from Phone Numbers > Manage > Buy a number
# Format: Phone number must be in E.164 format (e.g., +14155552671)
# Note: This is a paid service. Check pricing at https://www.twilio.com/pricing
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=

# =============================================================================
# ADVANCED SEARCH (OPTIONAL)
# =============================================================================
# Used for: Full-text search across tickets, messages, customers, documents
# Required: No - Basic search works without Elasticsearch
# Setup:
# Option 1 - Elastic Cloud (recommended for production):
#   1. Create account at https://cloud.elastic.co
#   2. Create deployment and get Cloud ID and API key
#   3. Use the endpoint URL for ELASTICSEARCH_NODE
# Option 2 - Self-hosted:
#   1. Install Elasticsearch: https://www.elastic.co/downloads/elasticsearch
#   2. Start Elasticsearch locally (default: http://localhost:9200)
ELASTICSEARCH_NODE=http://localhost:9200

# Choose ONE authentication method:
# Option 1: API Key (recommended for production)
ELASTICSEARCH_API_KEY=

# Option 2: Username/Password (for development)
ELASTICSEARCH_USERNAME=
ELASTICSEARCH_PASSWORD=

# =============================================================================
# FILE STORAGE (OPTIONAL BUT RECOMMENDED)
# =============================================================================
# Used for: Document uploads, attachments, user files, backups
# Required: No - File upload features disabled without S3
# Get credentials from: https://aws.amazon.com/s3/
# 1. Create AWS account at https://aws.amazon.com
# 2. Create IAM user with S3 permissions:
#    - Go to IAM > Users > Add User
#    - Attach policy: AmazonS3FullAccess (or custom policy)
#    - Save Access Key ID and Secret Access Key
# 3. Create S3 bucket:
#    - Go to S3 > Create bucket
#    - Choose region and bucket name
#    - Configure permissions (public/private based on needs)
# Note: This is a paid service. Check pricing at https://aws.amazon.com/s3/pricing/
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_S3_BUCKET=
AWS_REGION=us-east-1

# File Upload Configuration
MAX_FILE_SIZE_MB=100
ALLOWED_FILE_TYPES=pdf,jpg,jpeg,png,doc,docx,xls,xlsx

# =============================================================================
# WEBAUTHN / FIDO2 (OPTIONAL)
# =============================================================================
# Used for: Passwordless authentication (biometric, security keys)
# Required: No - Standard password authentication works without this
# Configuration:
# - RP_NAME: Display name for your app (e.g., "EarnTrack")
# - RP_ID: Your domain without protocol (e.g., "earntrack.app" or "localhost")
# - ORIGIN: Full URL of your frontend (e.g., "https://earntrack.app")
# Note: In production, change these to your actual domain
WEBAUTHN_RP_NAME=EarnTrack
WEBAUTHN_RP_ID=localhost
WEBAUTHN_ORIGIN=http://localhost:3000
