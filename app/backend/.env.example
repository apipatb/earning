# =============================================================================
# EarnTrack Backend Environment Configuration
# =============================================================================
# Copy this file to .env and update with your values
# WARNING: Never commit .env to version control!
#
# For detailed setup instructions, see ../env.SETUP.md in the root directory
# =============================================================================

# =============================================================================
# DATABASE CONFIGURATION (REQUIRED)
# =============================================================================
# PostgreSQL connection string
# Format: postgresql://[user]:[password]@[host]:[port]/[database]?schema=public
# For Docker: Use service name (e.g., postgres:5432)
# For local: Use localhost:5432
DATABASE_URL="postgresql://earntrack:change_this_secure_password_in_production@localhost:5432/earntrack?schema=public"

# =============================================================================
# JWT AUTHENTICATION (REQUIRED)
# =============================================================================
# Secret key for signing JWT tokens
# SECURITY: Generate a secure random string (minimum 32 characters)
# Command: openssl rand -base64 32
JWT_SECRET="your-super-secret-jwt-key-change-this-in-production"
JWT_EXPIRES_IN="7d"

# =============================================================================
# SERVER CONFIGURATION (REQUIRED)
# =============================================================================
PORT=3001
NODE_ENV="development"
LOG_LEVEL="debug"

# =============================================================================
# CORS CONFIGURATION (REQUIRED)
# =============================================================================
# Comma-separated list of allowed frontend origins
# Update with your production frontend URL
ALLOWED_ORIGINS="http://localhost:5173,http://localhost:3000"

# =============================================================================
# RATE LIMITING (REQUIRED)
# =============================================================================
# Time window in milliseconds (default: 15 minutes)
RATE_LIMIT_WINDOW_MS=900000
# Maximum requests per window per IP address
RATE_LIMIT_MAX_REQUESTS=100

# =============================================================================
# SECURITY (REQUIRED)
# =============================================================================
HELMET_ENABLED=true
COMPRESSION_ENABLED=true
CORS_CREDENTIALS=true

# =============================================================================
# MONITORING & ERROR TRACKING (OPTIONAL)
# =============================================================================
ENABLE_REQUEST_LOGGING=true
ENABLE_ERROR_TRACKING=false

# -----------------------------------------------------------------------------
# Sentry Error Tracking (OPTIONAL)
# -----------------------------------------------------------------------------
# Purpose: Production error tracking, performance monitoring, crash reports
# Required: NO - Application works without it
# Cost: Free tier available, paid plans for production
# Setup:
#   1. Create account at https://sentry.io
#   2. Create new project (select Node.js/Express)
#   3. Copy DSN from Settings > Projects > [Your Project] > Client Keys (DSN)
#   4. Paste DSN below (format: https://[key]@[org].ingest.sentry.io/[project])
# Documentation: https://docs.sentry.io/platforms/node/
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACE_SAMPLE_RATE=0.1
APP_VERSION=1.0.0

# =============================================================================
# EMAIL CONFIGURATION (OPTIONAL)
# =============================================================================
# Purpose: Send password resets, notifications, alerts to users
# Required: NO - Application works without email
# Common Providers:
#   Gmail:     smtp.gmail.com (requires App Password, not regular password)
#   SendGrid:  smtp.sendgrid.net (recommended for production)
#   AWS SES:   email-smtp.[region].amazonaws.com
#   Mailgun:   smtp.mailgun.org
#   Postmark:  smtp.postmarkapp.com
#
# Gmail Setup:
#   1. Enable 2FA on your Google account
#   2. Generate App Password: https://myaccount.google.com/apppasswords
#   3. Use App Password (not your regular password)
#
# SendGrid Setup (Recommended):
#   1. Create account at https://sendgrid.com
#   2. Create API key and use it as SMTP_PASSWORD
#   3. Use 'apikey' as SMTP_USER
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
EMAIL_FROM=noreply@earntrack.app

# =============================================================================
# AI CHATBOT CONFIGURATION (OPTIONAL)
# =============================================================================
# Purpose: AI-powered assistant for earning insights, recommendations, Q&A
# Required: NO - Chatbot feature will be disabled without API key
# Cost: Pay-per-use (approximately $0.15 per 1M tokens for gpt-4o-mini)
# Setup:
#   1. Create OpenAI account at https://platform.openai.com
#   2. Add payment method (required for API access)
#   3. Generate API key at https://platform.openai.com/api-keys
#   4. Click "Create new secret key" and copy it (starts with sk-...)
#   5. Set usage limits to control costs
# Models:
#   - gpt-4o-mini: Fastest, cheapest, good for most tasks (recommended)
#   - gpt-4o: More capable, slower, more expensive
#   - gpt-4-turbo: Balance of speed and capability
# Pricing: https://openai.com/pricing
# Documentation: https://platform.openai.com/docs
OPENAI_API_KEY=
OPENAI_MODEL_NAME="gpt-4o-mini"
OPENAI_MAX_TOKENS=1000

# =============================================================================
# SMS & WHATSAPP CONFIGURATION (OPTIONAL)
# =============================================================================
# Purpose: Send SMS campaigns, WhatsApp messages to customers
# Required: NO - SMS/WhatsApp features will be disabled without credentials
# Cost: Pay-per-message (varies by country, ~$0.0075 per SMS in US)
# Setup:
#   1. Create Twilio account at https://www.twilio.com/try-twilio
#   2. Get free trial credits ($15) or add payment method
#   3. From Console Dashboard, copy:
#      - Account SID
#      - Auth Token
#   4. Purchase phone number:
#      - Go to Phone Numbers > Manage > Buy a number
#      - Choose capabilities: SMS and/or WhatsApp
#      - For WhatsApp: Additional approval process required
#   5. Phone number format: E.164 (e.g., +14155552671)
# WhatsApp Setup:
#   - Request WhatsApp access through Twilio Console
#   - Complete business verification
#   - Set up WhatsApp message templates
# Pricing: https://www.twilio.com/pricing
# Documentation: https://www.twilio.com/docs
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=

# =============================================================================
# FILE UPLOAD & STORAGE (OPTIONAL BUT RECOMMENDED)
# =============================================================================
# Purpose: Store user uploads, attachments, documents, backups
# Required: NO - File upload features will be disabled without S3
# Cost: Pay-per-use (first 5GB free, then ~$0.023/GB/month)
# Setup:
#   1. Create AWS account at https://aws.amazon.com
#   2. Create IAM user for programmatic access:
#      a. Go to IAM > Users > Create User
#      b. Enable "Programmatic access"
#      c. Attach policy: AmazonS3FullAccess (or create custom restricted policy)
#      d. Save Access Key ID and Secret Access Key
#   3. Create S3 bucket:
#      a. Go to S3 > Create bucket
#      b. Choose unique bucket name (globally unique)
#      c. Select region (choose closest to your users)
#      d. Configure bucket permissions:
#         - Block public access (recommended)
#         - Use pre-signed URLs for downloads
#   4. Optional: Enable versioning and lifecycle policies
# Security Best Practices:
#   - Use IAM policies to restrict bucket access
#   - Enable bucket encryption
#   - Use pre-signed URLs instead of public access
#   - Enable CloudTrail for audit logs
# Pricing: https://aws.amazon.com/s3/pricing/
# Documentation: https://docs.aws.amazon.com/s3/
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_S3_BUCKET=
AWS_REGION=us-east-1

# File Upload Settings
MAX_FILE_SIZE_MB=100
ALLOWED_FILE_TYPES="pdf,jpg,jpeg,png,gif,webp,doc,docx,xls,xlsx,ppt,pptx,txt,csv"

# =============================================================================
# ADVANCED SEARCH (OPTIONAL)
# =============================================================================
# Purpose: Full-text search across tickets, messages, customers, documents
# Required: NO - Basic database search works without Elasticsearch
# Cost: Free (self-hosted) or paid (Elastic Cloud starting at $95/month)
# When to use: Large datasets (>10k records), complex search requirements
#
# Setup Option 1 - Elastic Cloud (Recommended for Production):
#   1. Create account at https://cloud.elastic.co
#   2. Start free trial (14 days)
#   3. Create deployment (choose region)
#   4. Copy endpoint URL and set as ELASTICSEARCH_NODE
#   5. Create API key:
#      - Go to Management > Stack Management > Security > API Keys
#      - Create API key with appropriate permissions
#      - Copy the API key
#   6. Use API key authentication (recommended)
#
# Setup Option 2 - Self-Hosted (Development):
#   1. Install Elasticsearch:
#      Docker: docker run -p 9200:9200 -e "discovery.type=single-node" docker.elastic.co/elasticsearch/elasticsearch:8.11.0
#      Or download from: https://www.elastic.co/downloads/elasticsearch
#   2. Start Elasticsearch (default: http://localhost:9200)
#   3. For local dev, you can omit authentication
#   4. For production, enable security and create credentials
#
# Authentication: Choose ONE method
#   - API Key (recommended for production)
#   - Username/Password (for development)
#
# Pricing: https://www.elastic.co/pricing/
# Documentation: https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html
ELASTICSEARCH_NODE="http://localhost:9200"
ELASTICSEARCH_API_KEY=
ELASTICSEARCH_USERNAME=
ELASTICSEARCH_PASSWORD=

# =============================================================================
# WEBAUTHN / FIDO2 (OPTIONAL)
# =============================================================================
# Purpose: Passwordless authentication using biometrics, security keys
# Required: NO - Standard password authentication works without this
# Features: Face ID, Touch ID, Windows Hello, YubiKey, etc.
# Configuration:
#   - RP_NAME: Relying Party name (display name for your app)
#   - RP_ID: Your domain without protocol/port (e.g., "earntrack.app")
#             For development: use "localhost"
#   - ORIGIN: Full URL of your frontend application
#             Must match exactly (including protocol and port)
# Production Example:
#   WEBAUTHN_RP_NAME="EarnTrack Production"
#   WEBAUTHN_RP_ID="earntrack.app"
#   WEBAUTHN_ORIGIN="https://earntrack.app"
# Documentation: https://webauthn.guide/
WEBAUTHN_RP_NAME="EarnTrack"
WEBAUTHN_RP_ID="localhost"
WEBAUTHN_ORIGIN="http://localhost:3000"
